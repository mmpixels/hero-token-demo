/* Container */
.hero-grid-wrap {
  position: relative;
  width: 100%;
  height: 100vh;
  min-height: 600px;
  overflow: hidden;
}

/* Static background grid - fixed, not animated */
.grid-bg {
  position: absolute;
  inset: 0;
  background-image: url('assets/perspective-grid.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  will-change: opacity;
  opacity: 1;
  transition: opacity 0.6s ease-in-out;
}

/* Centered animation stage */
.tag-stage {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
}

/* Tag styling - pill shape */
/* Responsive tag base */
.tag {
  position: relative;
  /* responsive font size: min 18px, preferred 2vw, max 28px */
  font-size: clamp(20px, 2vw, 28px);
  /* padding scaled by font-size */
  padding: 0.8em 2.6em;
  border-radius: 0.625em;
  background-color: rgba(0, 123, 167, 0.25); /* stronger fill - keeps color */
  color: #282626;
  font-family: "Noto Sans", sans-serif;
  font-weight: 500;
  letter-spacing: -0.01em;
  white-space: nowrap;
  will-change: transform, opacity, filter, box-shadow;
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
  transform-origin: center center;
  /* ensure hardware acceleration path for transform */
  transform: translate3d(0,0,0);
  /* smooth transitions for glow/scale */
  transition:
    transform 320ms cubic-bezier(0.2, 0.85, 0.24, 1),
    box-shadow 320ms cubic-bezier(0.2, 0.85, 0.24, 1),
    opacity 160ms ease-in-out;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Soft underlay to mask the grid and add depth */
.tag::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(
    180deg,
    rgba(255,255,255,0.02),
    rgba(0,0,0,0.04)
  );
  pointer-events: none;
  z-index: -1;
  box-shadow: none;
}

/* Idle / translated state uses em units so it scales */
.tag--idle {
  opacity: 0;
  transform: translate3d(0, 1.6em, 0);
}

/* Active visible state */
.tag--active {
  opacity: 1;
  transform: translate3d(0, 0, 0);
}

/* Glow animation states use keyframes defined below */
.tag--entering {
  animation: tag-enter 1000ms cubic-bezier(.0,0,.2,1) forwards;
}

.tag--glow-in {
  animation: tag-glow-in 360ms cubic-bezier(0.2, 0.85, 0.24, 1) ease-out forwards;
}

.tag--glowing {
  /* remove filter to avoid text fuzziness */
  filter: none;
  box-shadow:
    /* 1) dark drop shadow (offset Y, blur, alpha) */
    0 1.5em 1.6em rgba(0,0,0,0.1),

    /* 2) soft colored glow under pill for depth (small blur) */
    0 0.22em 0.9em rgba(0,123,167,0.02),

    /* 3) crisp ring (blur 0) â€” a sharp halo edge */
    0 0 0 0.10em rgba(170, 211, 226, 0.02);

  /* keep text crisp: very tiny text-shadow (optional) or none */
  text-shadow: 0 0 0 rgba(0,0,0,0); /* no blur on text */
  transform: translate3d(0, -0.10em, 0) scale(1.03);
}

.tag--glow-out {
  animation: tag-glow-out 500ms cubic-bezier(0.2, 0.85, 0.24, 1) ease-in forwards;
}

.tag--exiting {
  animation: tag-exit 700ms cubic-bezier(.4,0,1,1) forwards;
  filter: saturate(0.95);
}

/* Keyframes - use em units for translation & box-shadow so they scale */
@keyframes tag-enter {
  0% {
    opacity: 0;
    transform: translate3d(0, 1.6em, 0) scale(0.96);
  }
  60% {
    opacity: 1;
    transform: translate3d(0, -0.18em, 0) scale(1.035);
  }
  100% {
    transform: translate3d(0, 0, 0) scale(1);
  }
}

@keyframes tag-glow-in {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 rgba(0,123,167,0);
    filter: brightness(1) saturate(1);
  }
  45% {
    transform: scale(1.01);
    box-shadow:
      0 0.30em 0.70em rgba(0,123,167,0.05),
      0 0.15em 0.45em rgba(0,123,167,0.03);
    filter: brightness(1.03) saturate(1.02);
  }
  80% {
    transform: scale(1.015);
    box-shadow:
      0 0.45em 0.95em rgba(0,123,167,0.06),
      0 0.18em 0.55em rgba(0,123,167,0.04);
    filter: brightness(1.04) saturate(1.03);
  }
  100% {
    transform: scale(1.02);
    box-shadow:
      0 0.55em 1.2em rgba(0,123,167,0.07),
      0 0.20em 0.55em rgba(0,123,167,0.05);
    filter: brightness(1.04) saturate(1.03);
  }
}

@keyframes tag-glow-out {
  0% {
    transform: scale(1.02);
    box-shadow:
      0 0.55em 1.2em rgba(0,123,167,0.07),
      0 0.20em 0.55em rgba(0,123,167,0.05);
    filter: brightness(1.04) saturate(1.03);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 0 rgba(0,123,167,0);
    filter: brightness(1) saturate(1);
  }
}

/* === exit animation (fade + scale) using EM === */
@keyframes tag-exit {
 0% {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1); /* start at center */
    box-shadow: 0 0.55em 1.2em rgba(0,123,167,0.07), 0 0.20em 0.55em rgba(0,123,167,0.05);
  }
  30% {
    /* start to move upward and keep a slight scale */
    opacity: 0.95;
    transform: translate3d(0, -0.6em, 0) scale(1.02);
    box-shadow: 0 0.45em 1.0em rgba(0,123,167,0.06), 0 0.18em 0.45em rgba(0,123,167,0.04);
  }
  70% {
    /* accelerate upwards and reduce shadow */
    opacity: 0.6;
    transform: translate3d(0, -1.05em, 0) scale(1.01);
    box-shadow: 0 0.25em 0.6em rgba(0,123,167,0.03), 0 0.12em 0.3em rgba(0,123,167,0.02);
  }
  100% {
    /* finish above and invisible */
    opacity: 0;
    transform: translate3d(0, -1.6em, 0) scale(1);
    box-shadow: 0 0 0 rgba(0,123,167,0);
  }
}

/* Tablet adjustments */
@media (max-width: 768px) {
  .tag { padding: 0.55em 1em; }
}

/* Mobile adjustments */
@media (max-width: 480px) {
  .hero-grid-wrap { min-height: 500px; }
  .tag { padding: 0.8em 1.8em; }
  .tag--idle { transform: translate3d(0, 1em, 0); }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .tag--entering,
  .tag--exiting,
  .tag--glow-in,
  .tag--glow-out {
    animation: none !important;
  }
  .tag--entering { opacity: 1; transform: none; }
  .tag--exiting { opacity: 0; transform: none; transition: opacity 0.25s ease-in-out; }
  .tag--glowing,
  .tag--active { filter: none !important; box-shadow: none !important; transform: none !important; }
}

